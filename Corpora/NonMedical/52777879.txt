In mathematics, the base change theorems relate the direct image and the inverse image of sheaves. More precisely, they are about the base change map, given by the following natural transformation of sheaves:

  
    
      
        
          g
          
            ∗
          
        
        (
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        )
        →
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        (
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        )
      
    
    {\displaystyle g^{*}(R^{r}f_{*}{\mathcal {F}})\to R^{r}f'_{*}(g'^{*}{\mathcal {F}})}
  where

  
    
      
        
          
            
              
                
                  X
                  ′
                
              
              
                
                  
                    
                      
                        →
                      
                      
                        
                          g
                          ′
                        
                      
                    
                  
                
              
              
                X
              
            
            
              
                
                  f
                  ′
                
                ↓
              
              
              
                ↓
                f
              
            
            
              
                
                  S
                  ′
                
              
              
                
                  
                    
                      
                        →
                      
                      
                        g
                      
                    
                  
                
              
              
                S
              
            
          
        
      
    
    {\displaystyle {\begin{array}{rcl}X'&{\stackrel {g'}{\to }}&X\\f'\downarrow &&\downarrow f\\S'&{\stackrel {g}{\to }}&S\end{array}}}
  is a Cartesian square of topological spaces and 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   is a sheaf on X.
Such theorems exist in different branches of geometry: for (essentially arbitrary) topological spaces and proper maps f, in algebraic geometry for (quasi-)coherent sheaves and f proper or g flat, similarly in analytic geometry, but also for étale sheaves for f proper or g smooth.


== Introduction ==
A simple base change phenomenon arises in commutative algebra when A is a commutative ring and B and A' are two A-algebras. Let 
  
    
      
        
          B
          ′
        
        =
        B
        
          ⊗
          
            A
          
        
        
          A
          ′
        
      
    
    {\displaystyle B'=B\otimes _{A}A'}
  . In this situation, given a B-module M, there is an isomorphism (of A' -modules):

  
    
      
        (
        M
        
          ⊗
          
            B
          
        
        
          B
          ′
        
        
          )
          
            
              A
              ′
            
          
        
        ≅
        (
        
          M
          
            A
          
        
        )
        
          ⊗
          
            A
          
        
        
          A
          ′
        
        .
      
    
    {\displaystyle (M\otimes _{B}B')_{A'}\cong (M_{A})\otimes _{A}A'.}
  Here the subscript indicates the forgetful functor, i.e., 
  
    
      
        
          M
          
            A
          
        
      
    
    {\displaystyle M_{A}}
   is M, but regarded as an A-module.
Indeed, such an isomorphism is obtained by observing

  
    
      
        M
        
          ⊗
          
            B
          
        
        
          B
          ′
        
        =
        M
        
          ⊗
          
            B
          
        
        B
        
          ⊗
          
            A
          
        
        
          A
          ′
        
        ≅
        M
        
          ⊗
          
            A
          
        
        
          A
          ′
        
        .
      
    
    {\displaystyle M\otimes _{B}B'=M\otimes _{B}B\otimes _{A}A'\cong M\otimes _{A}A'.}
  Thus, the two operations, namely forgetful functors and tensor products commute in the sense of the above isomorphism.
The base change theorems discussed below are statements of a similar kind.


== Definition of the base change map ==
The base change theorems presented below all assert that (for different types of sheaves, and under various assumptions on the maps involved), that the following base change map

  
    
      
        
          g
          
            ∗
          
        
        (
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        )
        →
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        (
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        )
      
    
    {\displaystyle g^{*}(R^{r}f_{*}{\mathcal {F}})\to R^{r}f'_{*}(g'^{*}{\mathcal {F}})}
  is an isomorphism, where

  
    
      
        
          
            
              
                
                  X
                  ′
                
              
              
                
                  
                    
                      
                        →
                      
                      
                        
                          g
                          ′
                        
                      
                    
                  
                
              
              
                X
              
            
            
              
                
                  f
                  ′
                
                ↓
              
              
              
                ↓
                f
              
            
            
              
                
                  S
                  ′
                
              
              
                
                  
                    
                      
                        →
                      
                      
                        g
                      
                    
                  
                
              
              
                S
              
            
          
        
      
    
    {\displaystyle {\begin{array}{rcl}X'&{\stackrel {g'}{\to }}&X\\f'\downarrow &&\downarrow f\\S'&{\stackrel {g}{\to }}&S\\\end{array}}}
  are continuous maps between topological spaces that form a Cartesian square and 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   is a sheaf on X. Here 
  
    
      
        
          R
          
            i
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
      
    
    {\displaystyle R^{i}f_{*}{\mathcal {F}}}
   denotes the higher direct image of 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   under f, i.e., the derived functor of the direct image (also known as pushforward) functor 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f_{*}}
  .
This map exists without any assumptions on the maps f and g. It is constructed as follows: since 
  
    
      
        
          g
          
            ′
            
              ∗
            
          
        
      
    
    {\displaystyle g'^{*}}
   is left adjoint to 
  
    
      
        
          g
          
            ∗
          
          ′
        
      
    
    {\displaystyle g'_{*}}
  , there is a natural map (called unit map)

  
    
      
        id
        →
        
          g
          
            ∗
          
          ′
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
      
    
    {\displaystyle \operatorname {id} \to g'_{*}\circ g'^{*}}
  and so

  
    
      
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        →
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        ∘
        
          g
          
            ∗
          
          ′
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
        .
      
    
    {\displaystyle R^{r}f_{*}\to R^{r}f_{*}\circ g'_{*}\circ g'^{*}.}
  The Grothendieck spectral sequence then gives the first map and the last map (they are edge maps) in:

  
    
      
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        ∘
        
          g
          
            ∗
          
          ′
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
        →
        
          R
          
            r
          
        
        (
        f
        ∘
        
          g
          ′
        
        
          )
          
            ∗
          
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
        =
        
          R
          
            r
          
        
        (
        g
        ∘
        
          f
          ′
        
        
          )
          
            ∗
          
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
        →
        
          g
          
            ∗
          
        
        ∘
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
        .
      
    
    {\displaystyle R^{r}f_{*}\circ g'_{*}\circ g'^{*}\to R^{r}(f\circ g')_{*}\circ g'^{*}=R^{r}(g\circ f')_{*}\circ g'^{*}\to g_{*}\circ R^{r}f'_{*}\circ g'^{*}.}
  Combining this with the above yields

  
    
      
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        →
        
          g
          
            ∗
          
        
        ∘
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        ∘
        
          g
          
            ′
            
              ∗
            
          
        
        .
      
    
    {\displaystyle R^{r}f_{*}\to g_{*}\circ R^{r}f'_{*}\circ g'^{*}.}
  Using the adjointness of 
  
    
      
        
          g
          
            ∗
          
        
      
    
    {\displaystyle g^{*}}
   and 
  
    
      
        
          g
          
            ∗
          
        
      
    
    {\displaystyle g_{*}}
   finally yields the desired map.
The above-mentioned introductory example is a special case of this, namely for the affine schemes 
  
    
      
        X
        =
        Spec
        ⁡
        (
        B
        )
        ,
        S
        =
        Spec
        ⁡
        (
        A
        )
        ,
        
          S
          ′
        
        =
        Spec
        ⁡
        (
        
          A
          ′
        
        )
      
    
    {\displaystyle X=\operatorname {Spec} (B),S=\operatorname {Spec} (A),S'=\operatorname {Spec} (A')}
   and, consequently, 
  
    
      
        
          X
          ′
        
        =
        Spec
        ⁡
        (
        
          B
          ′
        
        )
      
    
    {\displaystyle X'=\operatorname {Spec} (B')}
  , and the quasi-coherent sheaf 
  
    
      
        
          
            F
          
        
        :=
        
          
            
              M
              ~
            
          
        
      
    
    {\displaystyle {\mathcal {F}}:={\tilde {M}}}
   associated to the B-module M.
It is conceptually convenient to organize the above base change maps, which only involve only a single higher direct image functor, into one which encodes all 
  
    
      
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
      
    
    {\displaystyle R^{r}f_{*}}
   at a time. In fact, similar arguments as above yield a map in the derived category of sheaves on S':

  
    
      
        
          g
          
            ∗
          
        
        R
        
          f
          
            ∗
          
        
        (
        
          
            F
          
        
        )
        →
        R
        
          f
          
            ∗
          
          ′
        
        (
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        )
      
    
    {\displaystyle g^{*}Rf_{*}({\mathcal {F}})\to Rf'_{*}(g'^{*}{\mathcal {F}})}
  where 
  
    
      
        R
        
          f
          
            ∗
          
        
      
    
    {\displaystyle Rf_{*}}
   denotes the (total) derived functor of 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f_{*}}
  .


== General topology ==


=== Proper base change ===
If X is a Hausdorff topological space, S is a locally compact Hausdorff space and f is universally closed (i.e., 
  
    
      
        X
        
          ×
          
            S
          
        
        T
        →
        T
      
    
    {\displaystyle X\times _{S}T\to T}
   is a closed map for any continuous map 
  
    
      
        T
        →
        S
      
    
    {\displaystyle T\to S}
  ), then
the base change map

  
    
      
        
          g
          
            ∗
          
        
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        →
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
      
    
    {\displaystyle g^{*}R^{r}f_{*}{\mathcal {F}}\to R^{r}f'_{*}g'^{*}{\mathcal {F}}}
  is an isomorphism. Indeed, we have: for 
  
    
      
        s
        ∈
        S
      
    
    {\displaystyle s\in S}
  ,

  
    
      
        (
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        
          )
          
            s
          
        
        =
        
          
            lim
            →
          
        
        ⁡
        
          H
          
            r
          
        
        (
        U
        ,
        
          
            F
          
        
        )
        =
        
          H
          
            r
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            F
          
        
        )
        ,
        
        
          X
          
            s
          
        
        =
        
          f
          
            −
            1
          
        
        (
        s
        )
      
    
    {\displaystyle (R^{r}f_{*}{\mathcal {F}})_{s}=\varinjlim H^{r}(U,{\mathcal {F}})=H^{r}(X_{s},{\mathcal {F}}),\quad X_{s}=f^{-1}(s)}
  and so for 
  
    
      
        s
        =
        g
        (
        t
        )
      
    
    {\displaystyle s=g(t)}
  

  
    
      
        
          g
          
            ∗
          
        
        (
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        
          )
          
            t
          
        
        =
        
          H
          
            r
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            F
          
        
        )
        =
        
          H
          
            r
          
        
        (
        
          X
          
            t
          
          ′
        
        ,
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        )
        =
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        (
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        
          )
          
            t
          
        
        .
      
    
    {\displaystyle g^{*}(R^{r}f_{*}{\mathcal {F}})_{t}=H^{r}(X_{s},{\mathcal {F}})=H^{r}(X'_{t},g'^{*}{\mathcal {F}})=R^{r}f'_{*}(g'^{*}{\mathcal {F}})_{t}.}
  To encode all individual higher derived functors of 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f_{*}}
   into one entity, the above statement may equivalently be rephrased by saying that the base change map

  
    
      
        
          g
          
            ∗
          
        
        R
        
          f
          
            ∗
          
        
        
          
            F
          
        
        →
        R
        
          f
          
            ∗
          
          ′
        
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
      
    
    {\displaystyle g^{*}Rf_{*}{\mathcal {F}}\to Rf'_{*}g'^{*}{\mathcal {F}}}
  is a quasi-isomorphism.
The assumptions that the involved spaces be Hausdorff have been weakened by Schnürer & Soergel (2016).
Lurie (2009) has extended the above theorem to non-abelian sheaf cohomology, i.e., sheaves taking values in simplicial sets (as opposed to abelian groups).


=== Direct image with compact support ===
If the map f is not closed, the base change map need not be an isomorphism, as the following example shows (the maps are the standard inclusions) :

  
    
      
        
          
            
              
                ∅
              
              
                
                  
                    
                      
                        →
                      
                      
                        
                          g
                          ′
                        
                      
                    
                  
                
              
              
                
                  C
                
                ∖
                {
                0
                }
              
            
            
              
                
                  f
                  ′
                
                ↓
              
              
              
                ↓
                f
              
            
            
              
                {
                0
                }
              
              
                
                  
                    
                      
                        →
                      
                      
                        g
                      
                    
                  
                
              
              
                
                  C
                
              
            
          
        
      
    
    {\displaystyle {\begin{array}{rcl}\emptyset &{\stackrel {g'}{\to }}&\mathbb {C} \setminus \{0\}\\f'\downarrow &&\downarrow f\\\{0\}&{\stackrel {g}{\to }}&\mathbb {C} \end{array}}}
  One the one hand 
  
    
      
        
          f
          
            ∗
          
          ′
        
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
      
    
    {\displaystyle f'_{*}g'^{*}{\mathcal {F}}}
   is always zero, but if 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   is a local system on 
  
    
      
        
          C
        
        ∖
        {
        0
        }
      
    
    {\displaystyle \mathbb {C} \setminus \{0\}}
   corresponding to a representation of the fundamental group 
  
    
      
        
          π
          
            1
          
        
        (
        X
        )
      
    
    {\displaystyle \pi _{1}(X)}
   (which is isomorphic to Z), then 
  
    
      
        
          g
          
            ∗
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
      
    
    {\displaystyle g^{*}f_{*}{\mathcal {F}}}
   can be computed as the invariants of the monodromy action of 
  
    
      
        
          π
          
            1
          
        
        (
        X
        ,
        x
        )
      
    
    {\displaystyle \pi _{1}(X,x)}
   on the stalk 
  
    
      
        
          
            
              F
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {F}}_{x}}
   (for any 
  
    
      
        x
        ≠
        0
      
    
    {\displaystyle x\neq 0}
  ), which need not vanish.
To obtain a base-change result, the functor 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f_{*}}
   (or its derived functor) has to be replaced by the direct image with compact support 
  
    
      
        R
        
          f
          
            !
          
        
      
    
    {\displaystyle Rf_{!}}
  . For example, if 
  
    
      
        f
        :
        X
        →
        S
      
    
    {\displaystyle f:X\to S}
   is the inclusion of an open subset, such as in the above example, 
  
    
      
        R
        
          f
          
            !
          
        
        
          
            F
          
        
      
    
    {\displaystyle Rf_{!}{\mathcal {F}}}
   is the extension by zero, i.e., its stalks are given by

  
    
      
        (
        R
        
          f
          
            !
          
        
        
          
            F
          
        
        
          )
          
            s
          
        
        =
        
          
            {
            
              
                
                  
                    
                      
                        F
                      
                    
                    
                      s
                    
                  
                
                
                  s
                  ∈
                  X
                  ,
                
              
              
                
                  0
                
                
                  s
                  ∉
                  X
                  .
                
              
            
            
          
        
      
    
    {\displaystyle (Rf_{!}{\mathcal {F}})_{s}={\begin{cases}{\mathcal {F}}_{s}&s\in X,\\0&s\notin X.\end{cases}}}
  In general, there is a map 
  
    
      
        R
        
          f
          
            !
          
        
        
          
            F
          
        
        →
        R
        
          f
          
            ∗
          
        
        
          
            F
          
        
      
    
    {\displaystyle Rf_{!}{\mathcal {F}}\to Rf_{*}{\mathcal {F}}}
  , which is a quasi-isomorphism if f is proper, but not in general. The proper base change theorem mentioned above has the following generalization: there is a quasi-isomorphism

  
    
      
        
          g
          
            ∗
          
        
        R
        
          f
          
            !
          
        
        
          
            F
          
        
        →
        R
        
          f
          
            !
          
          ′
        
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        .
      
    
    {\displaystyle g^{*}Rf_{!}{\mathcal {F}}\to Rf'_{!}g'^{*}{\mathcal {F}}.}
  


== Base change for quasi-coherent sheaves ==


=== Proper base change ===
Proper base change theorems for quasi-coherent sheaves apply in the following situation: 
  
    
      
        f
        :
        X
        →
        S
      
    
    {\displaystyle f:X\to S}
   is a proper morphism between noetherian schemes, and 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   is a coherent sheaf which is flat over S (i.e., 
  
    
      
        
          
            
              F
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {F}}_{x}}
   is flat over 
  
    
      
        
          
            
              O
            
          
          
            S
            ,
            f
            (
            x
            )
          
        
      
    
    {\displaystyle {\mathcal {O}}_{S,f(x)}}
  ). In this situation, the following statements hold:
"Semicontinuity theorem":
For each 
  
    
      
        p
        ≥
        0
      
    
    {\displaystyle p\geq 0}
  , the function 
  
    
      
        s
        ↦
        
          dim
          
            k
            (
            s
            )
          
        
        ⁡
        
          H
          
            p
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            
              F
            
          
          
            s
          
        
        )
        :
        S
        →
        
          Z
        
      
    
    {\displaystyle s\mapsto \dim _{k(s)}H^{p}(X_{s},{\mathcal {F}}_{s}):S\to \mathbb {Z} }
   is upper semicontinuous.
The function 
  
    
      
        s
        ↦
        χ
        (
        
          
            
              F
            
          
          
            s
          
        
        )
      
    
    {\displaystyle s\mapsto \chi ({\mathcal {F}}_{s})}
   is locally constant, where 
  
    
      
        χ
        (
        
          
            F
          
        
        )
      
    
    {\displaystyle \chi ({\mathcal {F}})}
   denotes the Euler characteristic.
"Grauert's theorem": if S is reduced and connected, then for each 
  
    
      
        p
        ≥
        0
      
    
    {\displaystyle p\geq 0}
   the following are equivalent

  
    
      
        s
        ↦
        
          dim
          
            k
            (
            s
            )
          
        
        ⁡
        
          H
          
            p
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            
              F
            
          
          
            s
          
        
        )
      
    
    {\displaystyle s\mapsto \dim _{k(s)}H^{p}(X_{s},{\mathcal {F}}_{s})}
   is constant.

  
    
      
        
          R
          
            p
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
      
    
    {\displaystyle R^{p}f_{*}{\mathcal {F}}}
   is locally free and the natural map
  
    
      
        
          R
          
            p
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        
          ⊗
          
            
              
                
                  O
                
              
              
                S
              
            
          
        
        k
        (
        s
        )
        →
        
          H
          
            p
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            
              F
            
          
          
            s
          
        
        )
      
    
    {\displaystyle R^{p}f_{*}{\mathcal {F}}\otimes _{{\mathcal {O}}_{S}}k(s)\to H^{p}(X_{s},{\mathcal {F}}_{s})}
  
is an isomorphism for all 
  
    
      
        s
        ∈
        S
      
    
    {\displaystyle s\in S}
  .
Furthermore, if these conditions hold, then the natural map

  
    
      
        
          R
          
            p
            −
            1
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        
          ⊗
          
            
              
                
                  O
                
              
              
                S
              
            
          
        
        k
        (
        s
        )
        →
        
          H
          
            p
            −
            1
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            
              F
            
          
          
            s
          
        
        )
      
    
    {\displaystyle R^{p-1}f_{*}{\mathcal {F}}\otimes _{{\mathcal {O}}_{S}}k(s)\to H^{p-1}(X_{s},{\mathcal {F}}_{s})}
  
is an isomorphism for all 
  
    
      
        s
        ∈
        S
      
    
    {\displaystyle s\in S}
  .If, for some p, 
  
    
      
        
          H
          
            p
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            
              F
            
          
          
            s
          
        
        )
        =
        0
      
    
    {\displaystyle H^{p}(X_{s},{\mathcal {F}}_{s})=0}
   for all 
  
    
      
        s
        ∈
        S
      
    
    {\displaystyle s\in S}
  , then the natural map
  
    
      
        
          R
          
            p
            −
            1
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        
          ⊗
          
            
              
                
                  O
                
              
              
                S
              
            
          
        
        k
        (
        s
        )
        →
        
          H
          
            p
            −
            1
          
        
        (
        
          X
          
            s
          
        
        ,
        
          
            
              F
            
          
          
            s
          
        
        )
      
    
    {\displaystyle R^{p-1}f_{*}{\mathcal {F}}\otimes _{{\mathcal {O}}_{S}}k(s)\to H^{p-1}(X_{s},{\mathcal {F}}_{s})}
  
is an isomorphism for all 
  
    
      
        s
        ∈
        S
      
    
    {\displaystyle s\in S}
  .As the stalk of the sheaf 
  
    
      
        
          R
          
            p
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
      
    
    {\displaystyle R^{p}f_{*}{\mathcal {F}}}
   is closely related to the cohomology of the fiber of the point under f, this statement is paraphrased by saying that "cohomology commutes with base extension".These statements are proved using the following fact, where in addition to the above assumptions 
  
    
      
        S
        =
        Spec
        ⁡
        A
      
    
    {\displaystyle S=\operatorname {Spec} A}
  : there is a finite complex 
  
    
      
        0
        →
        
          K
          
            0
          
        
        →
        
          K
          
            1
          
        
        →
        ⋯
        →
        
          K
          
            n
          
        
        →
        0
      
    
    {\displaystyle 0\to K^{0}\to K^{1}\to \cdots \to K^{n}\to 0}
   of finitely generated projective A-modules and a natural isomorphism of functors

  
    
      
        
          H
          
            p
          
        
        (
        X
        
          ×
          
            S
          
        
        Spec
        −
        ,
        
          
            F
          
        
        
          ⊗
          
            A
          
        
        −
        )
        →
        
          H
          
            p
          
        
        (
        
          K
          
            ∙
          
        
        
          ⊗
          
            A
          
        
        −
        )
        ,
        p
        ≥
        0
      
    
    {\displaystyle H^{p}(X\times _{S}\operatorname {Spec} -,{\mathcal {F}}\otimes _{A}-)\to H^{p}(K^{\bullet }\otimes _{A}-),p\geq 0}
  on the category of 
  
    
      
        A
      
    
    {\displaystyle A}
  -algebras.


=== Flat base change ===
The base change map

  
    
      
        
          g
          
            ∗
          
        
        (
        
          R
          
            r
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        )
        →
        
          R
          
            r
          
        
        
          f
          
            ∗
          
          ′
        
        (
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        )
      
    
    {\displaystyle g^{*}(R^{r}f_{*}{\mathcal {F}})\to R^{r}f'_{*}(g'^{*}{\mathcal {F}})}
  is an isomorphism for a quasi-coherent sheaf 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   (on 
  
    
      
        X
      
    
    {\displaystyle X}
  ), provided that the map 
  
    
      
        g
        :
        
          S
          ′
        
        →
        S
      
    
    {\displaystyle g:S'\rightarrow S}
   is flat (together with a number of technical conditions: f needs to be a separated morphism of finite type, the schemes involved need to be Noetherian).


==== Flat base change in the derived category ====
A far reaching extension of flat base change is possible when considering the base change map

  
    
      
        L
        
          g
          
            ∗
          
        
        R
        
          f
          
            ∗
          
        
        (
        
          
            F
          
        
        )
        →
        R
        
          f
          
            ∗
          
          ′
        
        (
        L
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
        )
      
    
    {\displaystyle Lg^{*}Rf_{*}({\mathcal {F}})\to Rf'_{*}(Lg'^{*}{\mathcal {F}})}
  in the derived category of sheaves on S', similarly as mentioned above. Here 
  
    
      
        L
        
          g
          
            ∗
          
        
      
    
    {\displaystyle Lg^{*}}
   is the (total) derived functor of the pullback of 
  
    
      
        
          
            O
          
        
      
    
    {\displaystyle {\mathcal {O}}}
  -modules (because 
  
    
      
        
          g
          
            ∗
          
        
        
          
            G
          
        
        =
        
          
            
              O
            
          
          
            X
          
        
        
          ⊗
          
            
              g
              
                −
                1
              
            
            
              
                
                  O
                
              
              
                S
              
            
          
        
        
          g
          
            −
            1
          
        
        
          
            G
          
        
      
    
    {\displaystyle g^{*}{\mathcal {G}}={\mathcal {O}}_{X}\otimes _{g^{-1}{\mathcal {O}}_{S}}g^{-1}{\mathcal {G}}}
   involves a tensor product, 
  
    
      
        
          g
          
            ∗
          
        
      
    
    {\displaystyle g^{*}}
   is not exact when g is not flat and therefore is not equal to its derived functor 
  
    
      
        L
        
          g
          
            ∗
          
        
      
    
    {\displaystyle Lg^{*}}
  ).
This map is a quasi-isomorphism provided that the following conditions are satisfied:

  
    
      
        S
      
    
    {\displaystyle S}
   is quasi-compact and 
  
    
      
        f
      
    
    {\displaystyle f}
   is quasi-compact and quasi-separated,

  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   is an object in 
  
    
      
        
          D
          
            b
          
        
        (
        
          
            
              O
            
          
          
            X
          
        
        
          -mod
        
        )
      
    
    {\displaystyle D^{b}({\mathcal {O}}_{X}{\text{-mod}})}
  , the bounded derived category of 
  
    
      
        
          
            
              O
            
          
          
            X
          
        
      
    
    {\displaystyle {\mathcal {O}}_{X}}
  -modules, and its cohomology sheaves are quasi-coherent (for example, 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   could be a bounded complex of quasi-coherent sheaves)

  
    
      
        X
      
    
    {\displaystyle X}
   and 
  
    
      
        
          S
          ′
        
      
    
    {\displaystyle S'}
   are Tor-independent over 
  
    
      
        S
      
    
    {\displaystyle S}
  , meaning that if 
  
    
      
        x
        ∈
        X
      
    
    {\displaystyle x\in X}
   and 
  
    
      
        
          s
          ′
        
        ∈
        
          S
          ′
        
      
    
    {\displaystyle s'\in S'}
   satisfy 
  
    
      
        f
        (
        x
        )
        =
        s
        =
        g
        (
        
          s
          ′
        
        )
      
    
    {\displaystyle f(x)=s=g(s')}
  , then for all integers 
  
    
      
        p
        ≥
        1
      
    
    {\displaystyle p\geq 1}
  ,
  
    
      
        
          Tor
          
            p
          
          
            
              
                
                  O
                
              
              
                S
                ,
                s
              
            
          
        
        ⁡
        (
        
          
            
              O
            
          
          
            X
            ,
            x
          
        
        ,
        
          
            
              O
            
          
          
            
              S
              ′
            
            ,
            
              s
              ′
            
          
        
        )
        =
        0
      
    
    {\displaystyle \operatorname {Tor} _{p}^{{\mathcal {O}}_{S,s}}({\mathcal {O}}_{X,x},{\mathcal {O}}_{S',s'})=0}
  .One of the following conditions is satisfied:

  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   has finite flat amplitude relative to 
  
    
      
        f
      
    
    {\displaystyle f}
  , meaning that it is quasi-isomorphic in 
  
    
      
        
          D
          
            −
          
        
        (
        
          f
          
            −
            1
          
        
        
          
            
              O
            
          
          
            S
          
        
        
          -mod
        
        )
      
    
    {\displaystyle D^{-}(f^{-1}{\mathcal {O}}_{S}{\text{-mod}})}
   to a complex 
  
    
      
        
          
            
              F
            
          
          ′
        
      
    
    {\displaystyle {\mathcal {F}}'}
   such that 
  
    
      
        (
        
          
            
              F
            
          
          ′
        
        
          )
          
            i
          
        
      
    
    {\displaystyle ({\mathcal {F}}')^{i}}
   is 
  
    
      
        
          f
          
            −
            1
          
        
        
          
            
              O
            
          
          
            S
          
        
      
    
    {\displaystyle f^{-1}{\mathcal {O}}_{S}}
  -flat for all 
  
    
      
        i
      
    
    {\displaystyle i}
   outside some bounded interval 
  
    
      
        [
        m
        ,
        n
        ]
      
    
    {\displaystyle [m,n]}
  ; equivalently, there exists an interval 
  
    
      
        [
        m
        ,
        n
        ]
      
    
    {\displaystyle [m,n]}
   such that for any complex 
  
    
      
        
          
            G
          
        
      
    
    {\displaystyle {\mathcal {G}}}
   in 
  
    
      
        
          D
          
            −
          
        
        (
        
          f
          
            −
            1
          
        
        
          
            
              O
            
          
          
            S
          
        
        
          -mod
        
        )
      
    
    {\displaystyle D^{-}(f^{-1}{\mathcal {O}}_{S}{\text{-mod}})}
  , one has 
  
    
      
        
          Tor
          
            i
          
        
        ⁡
        (
        
          
            F
          
        
        ,
        
          
            G
          
        
        )
        =
        0
      
    
    {\displaystyle \operatorname {Tor} _{i}({\mathcal {F}},{\mathcal {G}})=0}
   for all 
  
    
      
        i
      
    
    {\displaystyle i}
   outside 
  
    
      
        [
        m
        ,
        n
        ]
      
    
    {\displaystyle [m,n]}
  ; or

  
    
      
        g
      
    
    {\displaystyle g}
   has finite Tor-dimension, meaning that 
  
    
      
        
          
            
              O
            
          
          
            
              S
              ′
            
          
        
      
    
    {\displaystyle {\mathcal {O}}_{S'}}
   has finite flat amplitude relative to 
  
    
      
        g
      
    
    {\displaystyle g}
  .One advantage of this formulation is that the flatness hypothesis has been weakened.  However, making concrete computations of the cohomology of the left- and right-hand sides now requires the Grothendieck spectral sequence.


=== Base change in derived algebraic geometry ===
Derived algebraic geometry provides a means to drop the flatness assumption, provided that the pullback 
  
    
      
        
          X
          ′
        
      
    
    {\displaystyle X'}
   is replaced by the homotopy pullback. In the easiest case when X, S, and 
  
    
      
        
          S
          ′
        
      
    
    {\displaystyle S'}
   are affine (with the notation as above), the homotopy pullback is given by the derived tensor product

  
    
      
        
          X
          ′
        
        =
        Spec
        ⁡
        (
        
          B
          ′
        
        
          ⊗
          
            B
          
          
            L
          
        
        A
        )
      
    
    {\displaystyle X'=\operatorname {Spec} (B'\otimes _{B}^{L}A)}
  Then, assuming that the schemes (or, more generally, derived schemes) involved are quasi-compact and quasi-separated, the natural transformation

  
    
      
        L
        
          g
          
            ∗
          
        
        R
        
          f
          
            ∗
          
        
        
          
            F
          
        
        →
        R
        
          f
          
            ∗
          
          ′
        
        L
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
      
    
    {\displaystyle Lg^{*}Rf_{*}{\mathcal {F}}\to Rf'_{*}Lg'^{*}{\mathcal {F}}}
  is a quasi-isomorphism for any quasi-coherent sheaf, or more generally a complex of quasi-coherent sheaves.
The afore-mentioned flat base change result is in fact a special case since for g flat the homotopy pullback (which is locally given by a derived tensor product) agrees with the ordinary pullback (locally given by the underived tensor product), and since the pullback along the flat maps g and g' are automatically derived (i.e., 
  
    
      
        L
        
          g
          
            ∗
          
        
        =
        
          g
          
            ∗
          
        
      
    
    {\displaystyle Lg^{*}=g^{*}}
  ). The auxiliary assumptions related to the Tor-independence or Tor-amplitude in the preceding base change theorem also become unnecessary.
In the above form, base change has been extended by Ben-Zvi, Francis & Nadler (2010) to the situation where X, S, and S' are (possibly derived) stacks, provided that the map f is a perfect map (which includes the case that f is a quasi-compact, quasi-separated map of schemes, but also includes more general stacks, such as the classifying stack BG of an algebraic group in characteristic zero).


=== Variants and applications ===
Proper base change also holds in the context of complex manifolds and complex analytic spaces.
The theorem on formal functions is a variant of the proper base change, where the pullback is replaced by a completion operation.
The see-saw principle and the theorem of the cube, which are foundational facts in the theory of abelian varieties, are a consequence of proper base change.A base-change also holds for D-modules: if X, S, X', and S' are smooth varieties (but f and g need not be flat or proper etc.), there is a quasi-isomorphism

  
    
      
        
          g
          
            †
          
        
        
          ∫
          
            f
          
        
        
          
            F
          
        
        →
        
          ∫
          
            
              f
              ′
            
          
        
        
          g
          
            ′
            
              †
            
          
        
        
          
            F
          
        
        ,
      
    
    {\displaystyle g^{\dagger }\int _{f}{\mathcal {F}}\to \int _{f'}g'^{\dagger }{\mathcal {F}},}
  where 
  
    
      
        
          −
          
            †
          
        
      
    
    {\displaystyle -^{\dagger }}
   and 
  
    
      
        ∫
      
    
    {\displaystyle \int }
   denote the inverse and direct image functors for D-modules.


== Base change for étale sheaves ==
For étale torsion sheaves 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
  , there are two base change results referred to as proper and smooth base change, respectively: base change holds if 
  
    
      
        f
        :
        X
        →
        S
      
    
    {\displaystyle f:X\rightarrow S}
   is proper. It also holds if g is smooth, provided that f is quasi-compact and provided that the torsion of 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   is prime to the characteristic of the residue fields of X.Closely related to proper base change is the following fact (the two theorems are usually proved simultaneously): let X be a variety over a separably closed field and 
  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   a constructible sheaf on 
  
    
      
        
          X
          
            et
          
        
      
    
    {\displaystyle X_{\text{et}}}
  . Then 
  
    
      
        
          H
          
            r
          
        
        (
        X
        ,
        
          
            F
          
        
        )
      
    
    {\displaystyle H^{r}(X,{\mathcal {F}})}
   are finite in each of the following cases:

X is complete, or

  
    
      
        
          
            F
          
        
      
    
    {\displaystyle {\mathcal {F}}}
   has no p-torsion, where p is the characteristic of k.Under additional assumptions, Deninger (1988) extended the proper base change theorem to non-torsion étale sheaves.


=== Applications ===
In close analogy to the topological situation mentioned above, the base change map for an open immersion f, 

  
    
      
        
          g
          
            ∗
          
        
        
          f
          
            ∗
          
        
        
          
            F
          
        
        →
        
          f
          
            ∗
          
          ′
        
        
          g
          
            ′
            
              ∗
            
          
        
        
          
            F
          
        
      
    
    {\displaystyle g^{*}f_{*}{\mathcal {F}}\to f'_{*}g'^{*}{\mathcal {F}}}
  is not usually an isomorphism. Instead the extension by zero functor 
  
    
      
        
          f
          
            !
          
        
      
    
    {\displaystyle f_{!}}
   satisfies an isomorphism

  
    
      
        
          g
          
            ∗
          
        
        
          f
          
            !
          
        
        
          
            F
          
        
        →
        
          f
          
            !
          
          ′
        
        
          g
          
            ∗
          
        
        
          
            F
          
        
        .
      
    
    {\displaystyle g^{*}f_{!}{\mathcal {F}}\to f'_{!}g^{*}{\mathcal {F}}.}
  This fact and the proper base change suggest to define the direct image functor with compact support for a map f by

  
    
      
        R
        
          f
          
            !
          
        
        :=
        R
        
          p
          
            ∗
          
        
        
          j
          
            !
          
        
      
    
    {\displaystyle Rf_{!}:=Rp_{*}j_{!}}
  where 
  
    
      
        f
        =
        p
        ∘
        j
      
    
    {\displaystyle f=p\circ j}
   is a compactification of f, i.e., a factorization into an open immersion followed by a proper map.
The proper base change theorem is needed to show that this is well-defined, i.e., independent (up to isomorphism) of the choice of the compactification.
Moreover, again in analogy to the case of sheaves on a topological space, a base change formula for 
  
    
      
        
          g
          
            ∗
          
        
      
    
    {\displaystyle g_{*}}
   vs. 
  
    
      
        R
        
          f
          
            !
          
        
      
    
    {\displaystyle Rf_{!}}
   does hold for non-proper maps f.
For the structural map 
  
    
      
        f
        :
        X
        →
        S
        =
        Spec
        ⁡
        k
      
    
    {\displaystyle f:X\to S=\operatorname {Spec} k}
   of a scheme over a field k, the individual cohomologies of 
  
    
      
        R
        
          f
          
            !
          
        
        (
        
          
            F
          
        
        )
      
    
    {\displaystyle Rf_{!}({\mathcal {F}})}
  , denoted by 
  
    
      
        
          H
          
            c
          
          
            ∗
          
        
        (
        X
        ,
        
          
            F
          
        
        )
      
    
    {\displaystyle H_{c}^{*}(X,{\mathcal {F}})}
   referred to as cohomology with compact support. It is an important variant of usual étale cohomology.
Similar ideas are also used to construct an analogue of the functor 
  
    
      
        R
        
          f
          
            !
          
        
      
    
    {\displaystyle Rf_{!}}
   in A1-homotopy theory.


== See also ==
Grothendieck's relative point of view in algebraic geometry
Change of base (disambiguation)
Base change lifting of automorphic forms


== Further reading ==
Esnault, H.; Kerz, M.; Wittenberg, O. (2016), "A restriction isomorphism for cycles of relative dimension zero", Cambridge Journal of Mathematics, 4 (2): 163–196, arXiv:1503.08187v2, doi:10.4310/CJM.2016.v4.n2.a1, S2CID 54896268


== Notes ==


== References ==
Artin, Michael; Grothendieck, Alexandre; Verdier, Jean-Louis (1972), Séminaire de Géométrie Algébrique du Bois Marie - 1963-64 - Théorie des topos et cohomologie étale des schémas - (SGA 4) - vol. 3 (PDF), Lecture Notes in Mathematics (in French), vol. 305, Berlin; New York: Springer-Verlag, pp. vi+640, doi:10.1007/BFb0070714, ISBN 978-3-540-06118-2
Ben-Zvi, David; Francis, John; Nadler, David (2010), "Integral transforms and Drinfeld centers in derived algebraic geometry", J. Amer. Math. Soc., 23 (4): 909–966, arXiv:0805.0157, doi:10.1090/S0894-0347-10-00669-7, MR 2669705, S2CID 2202294
Berthelot, Pierre; Grothendieck, Alexandre; Illusie, Luc (1971), Séminaire de Géométrie Algébrique du Bois Marie - 1966-67 - Théorie des intersections et théorème de Riemann-Roch - (SGA 6) (Lecture notes in mathematics 225) (in French), Berlin; New York: Springer-Verlag, xii+700, doi:10.1007/BFb0066283, ISBN 978-3-540-05647-8
Deninger, Christopher (1988), "A proper base change theorem for non-torsion sheaves in étale cohomology", Journal of Pure and Applied Algebra, 50 (3): 231–235, doi:10.1016/0022-4049(88)90102-8
Gabber, "Finiteness theorems for étale cohomology of excellent schemes"
Grauert, Hans (1960), "Ein Theorem der analytischen Garbentheorie und die Modulräume komplexer Strukturen" (PDF), Publications Mathématiques de l'IHÉS, 5: 5–64, doi:10.1007/BF02684746, S2CID 122593346, Zbl 0100.08001
Grothendieck, A. (1963), "Éléments de géométrie algébrique. III. Etude cohomologique des faisceaux cohérents. II", Publ. Math. IHÉS, archived from the original on 2017-01-05, retrieved 2017-01-04
Hartshorne, Robin (1977), Algebraic Geometry, Berlin, New York: Springer-Verlag, ISBN 978-0-387-90244-9, MR 0463157, OCLC 13348052
Hotta, Ryoshi; Takeuchi, Kiyoshi; Tanisaki, Toshiyuki (2008), D-Modules, Perverse Sheaves, and Representation Theory, Birkhäuser
Iversen, Birger (1986), Cohomology of sheaves, Universitext, Berlin, New York: Springer-Verlag, doi:10.1007/978-3-642-82783-9, ISBN 978-3-540-16389-3, MR 0842190
Lurie, Jacob (2009), Higher Topos Theory, Annals of Mathematics Studies, vol. 170, Princeton University Press, arXiv:math.CT/0608040, doi:10.1515/9781400830558, ISBN 978-0-691-14049-0, MR 2522659
Milne, James S. (1980), Étale cohomology, Princeton University Press, ISBN 978-0-691-08238-7
Milne, James S. (2012), Lectures on Étale Cohomology (PDF)
Mumford, David (2008) [1970], Abelian varieties, Tata Institute of Fundamental Research Studies in Mathematics, vol. 5, Providence, R.I.: American Mathematical Society, ISBN 978-81-85931-86-9, MR 0282985, OCLC 138290
Toën, Bertrand (2012), Proper local complete intersection morphisms preserve perfect complexes, arXiv:1210.2827, Bibcode:2012arXiv1210.2827T
Schnürer, O. M.; Soergel, W. (2016), "Proper base change for separated locally proper maps", Rend. Semin. Mat. Univ. Padova, 135: 223–250, arXiv:1404.7630v2, doi:10.4171/RSMUP/135-13, S2CID 118024164
Vakil, Ravi (2015), Foundations of Algebraic Geometry (PDF)


== External links ==
Brian Conrad's handout
Trouble with semicontinuity